{% import 'roots/evaluation.html' as evaluation %}


{% macro modal_settings() %}
<!-- Settings -->
<div class="ui tiny modal" id="settings-dialog">
    <i class="close icon"></i>
    <div class="header"> Settings </div>

    <div class="ui form content">

        <div class="field">
            <label>Root detection model</label>
            <div class="ui dropdown selection" id="settings-active-model">
                <input type="hidden" name="active-model">
                <i class="dropdown icon"></i>
                <div class="default text">Segmentation model</div>
                <div class="menu">
                    <!--<div class="item" data-value="1">model_1</div>
                    <div class="item" data-value="0">model_2</div>-->
                </div>
            </div>
        </div>

        <div class="ui divider"></div>
        <div class="field">
            <label>Exclusion mask</label>
            <div class="ui toggle checkbox" id="settings-exclusionmask-enable">
                <input type="checkbox">
                <label>Enable detection of foreign objects (e.g. tape)</label>
            </div>
        </div>

        <div class="field" id="settings-exclusionmask-model-field" style="display:none">
            <label>Exclusion mask model</label>
            <div class="ui dropdown selection" id="settings-exclusionmask-model">
                <input type="hidden" name="active-model">
                <i class="dropdown icon"></i>
                <div class="default text">Exclusion mask model</div>
                <div class="menu">
                    <!--<div class="item" data-value="1">model_1</div>
                    <div class="item" data-value="0">model_2</div>-->
                </div>
            </div>
        </div>

        <div class="ui divider"></div>
        <div class="field" id="settings-tracking-model-field">
            <label>Root tracking model</label>
            <div class="ui dropdown selection" id="settings-tracking-model">
                <input type="hidden" name="active-model">
                <i class="dropdown icon"></i>
                <div class="default text">Root tracking model</div>
                <div class="menu">
                    <!--<div class="item" data-value="1">model_1</div>
                    <div class="item" data-value="0">model_2</div>-->
                </div>
            </div>
        </div>


        <div class="ui divider"></div>
        <div class="field" id="settings-gpu-field">
            <label>GPU</label>
            <div class="ui visible warning message" id="settings-no-gpu-warning">
                <p>GPU not available</p>
            </div>
            <div id="settings-gpu-available-box">
                <div class="ui message" id="settings-gpu-name-info">
                    <p>Available GPU: <span id="settings-gpu-name">XXX</span></p>
                </div>
                <div class="ui toggle checkbox" id="settings-gpu-enable">
                    <input type="checkbox">
                    <label>Enable processing on the GPU</label>
                </div>
            </div>
        </div>

        <div class="ui divider"></div>


        <div class="actions">
            <div class="ui negative button">
                Cancel
            </div>
            <div class="ui positive right labeled icon button" id="settings-ok-button">
                Save
                <i class="checkmark icon"></i>
            </div>
        </div>
    </div>
</div>
{% endmacro %}

{% macro save_modal(app) %}
<!--Test modalllllllll-->
<div class="ui modal" id="save-modal">

    <!-- Oskars box -->
    {# {{ evaluation.evaluation_box(app) }} #}

    <!-- Popup title -->
    <div class="header">Model Results</div>

    <!-- Evaluation results -->
    <div class="scrolling content">
        {{ evaluation.evaluation_save_infobox(trainingmodule = app+".Training", evaluationmodule = app) }}
    </div>

    <!-- Save or discard field -->
    {{ evaluation.evaluation_save_field(app) }}
</div>
{% endmacro %}

{% macro modal_evaluation_loading(app) %}
<div class="ui tiny modal" id = "evaluation-modal">
    <div class="ui segment">
        <div class="ui active massive slow text elastic loader blue inline centered">Evaluating models</div>
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <div class="actions">
            <div class="ui negative button" onclick = "{{app}}.Training.stop_evaluation()" >
            Cancel evaluation
            </div>
        </div>
    </div>
</div>
{% endmacro %}
